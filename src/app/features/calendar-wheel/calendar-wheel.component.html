<div class="calendar-wheel-container">
  <div class="wheel-header">
    <h2>Spin the Wheel of Time</h2>
    <p>Discover what happened in each year of Mdg's journey!</p>
  </div>

  <div class="wheel-wrapper">
    <div class="wheel-container">
      <div class="wheel" [style.transform]="getWheelTransform()">
        <div 
          *ngFor="let year of years" 
          class="year-label"
          [style]="getYearStyle(year)"
          (click)="selectYear(year)"
          [class.clickable]="true"
        >
          {{ year }}
        </div>
      </div>
      
      <div class="wheel-center">
        <div class="center-circle">
          <div class="center-icon">M</div>
        </div>
      </div>
      
      <div class="pointer"></div>
    </div>
    
    <div class="current-year-display" *ngIf="!isSpinning">
      <div class="current-year-label">Currently pointing to:</div>
      <div class="current-year-value">{{ getCurrentYear() }}</div>
    </div>
    
    <button 
      class="spin-button" 
      (click)="spinWheel()" 
      [disabled]="isSpinning"
      [class.spinning]="isSpinning"
    >
      <span *ngIf="!isSpinning">🎲 Spin the Wheel!</span>
      <span *ngIf="isSpinning">🌀 Spinning...</span>
    </button>
  </div>

  <!-- Year Modal -->
  <div class="year-modal-overlay" [class.open]="isModalOpen" (click)="closeModal()">
    <div class="year-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>{{ selectedYear }} - The Year of {{ selectedYearData?.majorEvent?.title || 'Memories' }}</h3>
        <button class="close-btn" (click)="closeModal()">✕</button>
      </div>
      
      <div class="modal-content" *ngIf="selectedYearData">
        <div class="year-stats">
          <div class="stat">
            <span class="stat-number">{{ selectedYearData.events.length }}</span>
            <span class="stat-label">Event{{ selectedYearData.events.length !== 1 ? 's' : '' }}</span>
          </div>
          <div class="stat">
            <span class="stat-number">{{ selectedYearData.majorEvent ? '🏆' : '📅' }}</span>
            <span class="stat-label">Highlight</span>
          </div>
        </div>

        <div class="events-list" *ngIf="selectedYearData.events.length > 0">
          <div 
            *ngFor="let event of selectedYearData.events" 
            class="event-card"
            [class.major]="event.golden || event.diamond"
          >
            <div class="event-header">
              <h4>{{ event.title }}</h4>
              <div class="event-badges">
                <span *ngIf="event.golden" class="badge golden">✨ Golden</span>
                <span *ngIf="event.diamond" class="badge diamond">💎 Diamond</span>
              </div>
            </div>
            
            <p class="event-subtitle">{{ event.subtitle }}</p>
            
            <div class="event-description">
              <p>{{ event.shortDescription || event.description }}</p>
            </div>
            
            <div class="event-tags" *ngIf="event.tags && event.tags.length > 0">
              <span 
                *ngFor="let tag of event.tags" 
                class="tag"
              >
                {{ tag }}
              </span>
            </div>
          </div>
        </div>

        <div class="no-events" *ngIf="selectedYearData.events.length === 0">
          <div class="no-events-icon">📅</div>
          <p>No major events recorded for {{ selectedYear }}.</p>
          <p>Maybe it was a quiet year, or the events are yet to come!</p>
        </div>
      </div>
    </div>
  </div>
</div>

